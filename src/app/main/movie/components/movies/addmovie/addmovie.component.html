<form class="mx-5 my-5">
  <div class="form-group mb-2">
    <label class="mb-2 fs-3" for="title">Title</label>
    <input
      type="text"
      class="form-control"
      name="title"
      id="title"
      [(ngModel)]="movie.title"
      placeholder="the movie Title"
    />
  </div>
  <div class="form-group">
    <label class="mb-2 fs-3" for="description">Description</label>
    <textarea
      class="form-control"
      name="description"
      [(ngModel)]="movie.description"
      id="description"
      rows="3"
    ></textarea>
  </div>
  <div class="form-group">
    <label class="mb-2 fs-3" for="formFile">Cover</label>
    <input
      type="file"
      accept="images/*"
      (change)="selectImage($event)"
      class="mb-2 form-control"
      id="cover"
      name="movieCover"
    />
    <img
      [src]="coverPreview"
      class="rounded mx-auto d-block"
      width="200"
      height="200"
      alt="..."
    />
  </div>

  <div class="form-group">
    <label class="mb-2 fs-3" for="name">Director Name</label>
    <input
      type="text"
      class="form-control"
      name="name"
      [(ngModel)]="movie.director.name"
      id="name"
      placeholder="the director name"
    />
  </div>

  <div class="form-group mb-2">
    <label class="mb-2 fs-3" for="phone">Director photo Link</label>
    <input
      type="tel"
      class="form-control"
      name="link"
      [(ngModel)]="movie.director.link"
      id="link"
      placeholder="the director photo Link"
    />
  </div>

  <div class="form-group m-3 container">
    <label class="pb-2 fs-3">Categories</label>
    <div class="row" id="checkRow">
      <div class="col-sm-4 form-check" *ngFor="let cat of categories">
        <input
          class="form-check-input"
          name="{{ cat.name }}"
          (change)="setCat($event)"
          type="checkbox"
          id="{{ cat.cat_id }}"
        />
        <label class="form-check-label" for="flexCheckDefault">
          {{ cat.name }}
        </label>
      </div>
    </div>
  </div>

  <div class="form-group m-3 row">
    <div class="form-group mt-3">
      <label class="mb-2 fs-3" for="name">Actors</label>
      <table class="table table-dark table-striped table-sm">
        <thead class="bg-light">
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
            <th>Photo Link</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of dynamicRows; let i = index">
            <td>
              <input
                type="text"
                class="form-control"
                name="firstName{{ i }}"
                [(ngModel)]="movie.actors[i].firstName"
                id="firstName"
              />
            </td>
            <td>
              <input
                type="text"
                class="form-control"
                name="lastName{{ i }}"
                [(ngModel)]="movie.actors[i].lastName"
                id="lastName"
              />
            </td>
            <td>
              <input
                type="text"
                class="form-control"
                name="age{{ i }}"
                [(ngModel)]="movie.actors[i].age"
                id="age"
              />
            </td>
            <td>
              <input
                type="text"
                class="form-control"
                id="photoLink"
                [(ngModel)]="movie.actors[i].photoLink"
                name="photoLink{{ i }}"
              />
            </td>
            <td>
              <button
                *ngIf="i === dynamicRows.length - 1"
                (click)="addNew()"
                class="btn btn-light"
              >
                <i class="bi bi-plus-square-fill"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <button (click)="saveMovie()" class="btn-lg btn btn-success float-end mb-4">
    save
  </button>
</form>

<div class="content-wrapper container-xxl p-0">
  <div class="content-body">
    <!-- content-header component -->
    <app-content-header [contentHeader]="contentHeader"></app-content-header>

    <!-- Add Movie -->
    <div class="blog-edit-wrapper">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <!-- Form -->
              <form action="javascript:;" class="mt-2">
                <div class="row">
                  <div class="col-md-6 col-12">
                    <div class="form-group mb-2">
                      <label for="blog-edit-title">Title</label>
                      <input
                        type="text"
                        id="blog-edit-title"
                        name="blog-edit-title"
                        class="form-control"
                        [(ngModel)]="movie.title"
                      />
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group mb-2">
                      <label for="blog-edit-category">Category</label>

                      <ng-select
                        [items]="categories"
                        [multiple]="true"
                        [closeOnSelect]="false"
                        [searchable]="false"
                        bindLabel="name"
                        placeholder="Select people"
                        [(ngModel)]="selectCategoriesSelected"
                        name="selectTitle"
                      >
                      </ng-select>
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group mb-2">
                      <label for="blog-edit-slug">Director full name</label>
                      <input
                        type="text"
                        id="blog-edit-slug"
                        class="form-control"
                        name="movie.director.name"
                        [(ngModel)]="movie.director.name"
                      />
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group mb-2">
                      <label for="blog-edit-status">Director photo link</label>
                      <input
                        type="text"
                        id="blog-edit-slug"
                        class="form-control"
                        name="movie.director.link"
                        [(ngModel)]="movie.director.link"
                      />
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="form-group mb-2">
                      <label>Content</label>
                      <quill-editor
                        style="height: 300px"
                        [(ngModel)]="movie.description"
                        name="quill-content"
                        [modules]="{ syntax: true, toolbar: [['code-block']] }"
                      >
                        <div quill-editor-toolbar>
                          <span class="ql-formats">
                            <button class="ql-bold" [title]="'Bold'"></button>
                            <button
                              class="ql-italic"
                              [title]="'italic'"
                            ></button>
                            <button
                              class="ql-underline"
                              [title]="'underline'"
                            ></button>
                          </span>
                          <span class="ql-formats">
                            <select class="ql-align" [title]="'Alignment'">
                              <option selected></option>
                              <option value="center"></option>
                              <option value="right"></option>
                              <option value="justify"></option>
                            </select>
                          </span>
                        </div>
                      </quill-editor>
                    </div>
                  </div>
                  <div class="col-12 mb-2">
                    <div class="border rounded p-2">
                      <h4 class="mb-1">Movie Poster</h4>
                      <div class="media flex-column flex-md-row">
                        <img
                          [src]="coverPreview"
                          class="rounded mr-2 mb-1 mb-md-0"
                          width="110"
                          height="170"
                          alt="..."
                        />
                        <div class="media-body">
                          <small class="text-muted">Required an image.</small>
                          <br /><br />
                          <div class="d-inline-block">
                            <div class="form-group mb-0">
                              <div class="custom-file">
                                <input
                                  type="file"
                                  class="custom-file-input"
                                  id="blogCustomFile"
                                  accept="image/*"
                                  (change)="selectImage($event)"
                                />
                                <label
                                  class="custom-file-label"
                                  for="blogCustomFile"
                                  >Choose file</label
                                >
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Add actors -->
                  <div class="col-12 mb-2">
                    <div class="border rounded p-2">
                      <h4 class="mb-1">Movie Poster</h4>
                      <form action="#" class="invoice-repeater">
                        <div
                          *ngFor="let item of items; let i = index"
                          @heightIn
                        >
                          <div class="row d-flex align-items-end">
                            <div class="col-md-4 col-12">
                              <div class="form-group">
                                <label for="itemName{{ i }}">Item Name</label>
                                <input
                                  type="text"
                                  class="form-control"
                                  [(ngModel)]="item.itemName"
                                  name="itemName{{ i }}"
                                  id="itemName{{ i }}"
                                  placeholder="Vuexy Admin Template"
                                />
                              </div>
                            </div>

                            <div class="col-md-2 col-12">
                              <div class="form-group">
                                <label for="itemCost">Cost</label>
                                <input
                                  type="number"
                                  class="form-control"
                                  id="itemcost"
                                  [(ngModel)]="item.itemCost"
                                  name="itemCost{{ i }}"
                                  id="itemCost{{ i }}"
                                  placeholder="32"
                                />
                              </div>
                            </div>

                            <div class="col-md-2 col-12">
                              <div class="form-group">
                                <label for="itemQuantity{{ i }}"
                                  >Quantity</label
                                >
                                <input
                                  type="number"
                                  class="form-control"
                                  id="itemQuantity{{ i }}"
                                  name="itemQuantity{{ i }}"
                                  [(ngModel)]="item.itemQuantity"
                                  placeholder="1"
                                />
                              </div>
                            </div>

                            <div class="col-md-2 col-12">
                              <div class="form-group">
                                <label for="staticPrice">Price</label>
                                <input
                                  type="text"
                                  readonly
                                  class="form-control-plaintext"
                                  id="staticPrice"
                                  value="$32"
                                />
                              </div>
                            </div>

                            <div class="col-md-2 col-12 mb-50">
                              <div class="form-group">
                                <button
                                  class="btn btn-outline-danger text-nowrap px-1"
                                  (click)="deleteItem(i)"
                                  rippleEffect
                                >
                                  <i data-feather="x" class="mr-25"></i>
                                  <span>Delete</span>
                                </button>
                              </div>
                            </div>
                          </div>
                          <hr />
                        </div>
                      </form>
                      <div class="row">
                        <div class="col-12">
                          <button
                            class="btn btn-icon btn-primary"
                            type="button"
                            (click)="addItem()"
                            rippleEffect
                          >
                            <i data-feather="plus" class="mr-25"></i>
                            <span>Add New</span>
                          </button>
                        </div>
                      </div>
                      <div class="media-body"></div>
                    </div>
                  </div>
                  <!--/ Add actors -->
                  <div class="col-12 mt-50">
                    <button
                      type="submit"
                      class="btn btn-primary mr-1"
                      rippleEffect
                    >
                      Save movie
                    </button>
                    <button
                      type="reset"
                      class="btn btn-outline-secondary"
                      rippleEffect
                    >
                      Cancel
                    </button>
                  </div>
                </div>
              </form>
              <!--/ Form -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--/ Add Movie -->
  </div>
</div>
